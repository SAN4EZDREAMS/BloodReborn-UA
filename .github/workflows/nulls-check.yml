name: NULLS Check

on:
  workflow_call:

jobs:
  list-xml-ids:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Extract and display XML IDs
        run: |
          while IFS= read -r file; do
            echo "File: $file"
            ids=$(grep -oP '<text id="\K[0-9]+' "$file" | while read id; do
              if grep -q "<text id=\"$id\">%null%" "$file"; then
                echo -n "$id,"
              fi
            done)
            ids=${ids%,}
            if [ -n "$ids" ]; then
              echo "$ids"
            else
              echo "No IDs found."
            fi
            echo "---------------------"
          done < <(find . -type f -name "*.xml")
